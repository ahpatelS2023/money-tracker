{"ast":null,"code":"import _objectSpread from \"/Users/amipatel/Desktop/money-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/amipatel/Desktop/money-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _handleActions;\n\nimport pick from 'lodash/pick';\nimport { handleActions } from 'redux-actions';\nimport { getType } from 'typesafe-actions';\nimport { loadSettingsSuccess, changeSettingsCurrency, updateExchangeRateSuccess, toggleSectionCollapse, completeSetup } from '../actions/settings';\nimport { signOutSuccess } from 'features/user/state/ui/SignOut.action';\nimport Currency from '../entities/Currency';\nvar initialState = {\n  isLoaded: false,\n  isSetupComplete: false,\n  currency: {\n    base: Currency.defaultBase,\n    secondary: []\n  },\n  exchangeRate: _defineProperty({}, Currency.defaultBase, 1.0),\n  collapsedSections: []\n};\nexport default handleActions((_handleActions = {}, _defineProperty(_handleActions, loadSettingsSuccess, function (state, _ref) {\n  var payload = _ref.payload;\n  return _objectSpread({}, state, {\n    isLoaded: true\n  }, pick(payload, Object.keys(state)));\n}), _defineProperty(_handleActions, changeSettingsCurrency, function (state, _ref2) {\n  var payload = _ref2.payload;\n  var base = payload.base,\n      secondary = payload.secondary;\n\n  if (secondary.includes(base)) {\n    secondary = secondary.concat(state.currency.base).filter(function (code) {\n      return code !== base;\n    });\n  }\n\n  return _objectSpread({}, state, {\n    currency: {\n      base: base,\n      secondary: secondary\n    }\n  });\n}), _defineProperty(_handleActions, updateExchangeRateSuccess, function (state, _ref3) {\n  var payload = _ref3.payload;\n  return _objectSpread({}, state, {\n    exchangeRate: payload\n  });\n}), _defineProperty(_handleActions, toggleSectionCollapse, function (state, _ref4) {\n  var payload = _ref4.payload;\n  return _objectSpread({}, state, {\n    collapsedSections: state.collapsedSections.includes(payload) ? state.collapsedSections.filter(function (section) {\n      return section !== payload;\n    }) : state.collapsedSections.concat(payload)\n  });\n}), _defineProperty(_handleActions, completeSetup, function (state) {\n  return _objectSpread({}, state, {\n    isSetupComplete: true\n  });\n}), _defineProperty(_handleActions, getType(signOutSuccess), function () {\n  return initialState;\n}), _handleActions), initialState);","map":{"version":3,"sources":["/Users/amipatel/Desktop/money-tracker/src/reducers/settings.js"],"names":["pick","handleActions","getType","loadSettingsSuccess","changeSettingsCurrency","updateExchangeRateSuccess","toggleSectionCollapse","completeSetup","signOutSuccess","Currency","initialState","isLoaded","isSetupComplete","currency","base","defaultBase","secondary","exchangeRate","collapsedSections","state","payload","Object","keys","includes","concat","filter","code","section"],"mappings":";;;;;AAAA,OAAOA,IAAP,MAAiB,aAAjB;AACA,SAASC,aAAT,QAA8B,eAA9B;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SACEC,mBADF,EAEEC,sBAFF,EAGEC,yBAHF,EAIEC,qBAJF,EAKEC,aALF,QAMO,qBANP;AAOA,SAASC,cAAT,QAA+B,uCAA/B;AACA,OAAOC,QAAP,MAAqB,sBAArB;AAEA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,KADS;AAEnBC,EAAAA,eAAe,EAAE,KAFE;AAGnBC,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,IAAI,EAAEL,QAAQ,CAACM,WAAjB;AAA8BC,IAAAA,SAAS,EAAE;AAAzC,GAHS;AAInBC,EAAAA,YAAY,sBAAKR,QAAQ,CAACM,WAAd,EAA4B,GAA5B,CAJO;AAKnBG,EAAAA,iBAAiB,EAAE;AALA,CAArB;AAQA,eAAejB,aAAa,uDAEvBE,mBAFuB,EAED,UAACgB,KAAD;AAAA,MAAUC,OAAV,QAAUA,OAAV;AAAA,2BAClBD,KADkB;AAErBR,IAAAA,QAAQ,EAAE;AAFW,KAGlBX,IAAI,CAACoB,OAAD,EAAUC,MAAM,CAACC,IAAP,CAAYH,KAAZ,CAAV,CAHc;AAAA,CAFC,mCAOvBf,sBAPuB,EAOE,UAACe,KAAD,SAAwB;AAAA,MAAdC,OAAc,SAAdA,OAAc;AAAA,MAC1CN,IAD0C,GACtBM,OADsB,CAC1CN,IAD0C;AAAA,MACpCE,SADoC,GACtBI,OADsB,CACpCJ,SADoC;;AAEhD,MAAIA,SAAS,CAACO,QAAV,CAAmBT,IAAnB,CAAJ,EAA8B;AAC5BE,IAAAA,SAAS,GAAGA,SAAS,CAClBQ,MADS,CACFL,KAAK,CAACN,QAAN,CAAeC,IADb,EAETW,MAFS,CAEF,UAAAC,IAAI;AAAA,aAAIA,IAAI,KAAKZ,IAAb;AAAA,KAFF,CAAZ;AAGD;;AAED,2BAAYK,KAAZ;AAAmBN,IAAAA,QAAQ,EAAE;AAAEC,MAAAA,IAAI,EAAJA,IAAF;AAAQE,MAAAA,SAAS,EAATA;AAAR;AAA7B;AACD,CAhBuB,mCAiBvBX,yBAjBuB,EAiBK,UAACc,KAAD;AAAA,MAAUC,OAAV,SAAUA,OAAV;AAAA,2BACxBD,KADwB;AAE3BF,IAAAA,YAAY,EAAEG;AAFa;AAAA,CAjBL,mCAqBvBd,qBArBuB,EAqBC,UAACa,KAAD;AAAA,MAAUC,OAAV,SAAUA,OAAV;AAAA,2BACpBD,KADoB;AAEvBD,IAAAA,iBAAiB,EAAEC,KAAK,CAACD,iBAAN,CAAwBK,QAAxB,CAAiCH,OAAjC,IACfD,KAAK,CAACD,iBAAN,CAAwBO,MAAxB,CAA+B,UAAAE,OAAO;AAAA,aAAIA,OAAO,KAAKP,OAAhB;AAAA,KAAtC,CADe,GAEfD,KAAK,CAACD,iBAAN,CAAwBM,MAAxB,CAA+BJ,OAA/B;AAJmB;AAAA,CArBD,mCA2BvBb,aA3BuB,EA2BP,UAAAY,KAAK;AAAA,2BAAUA,KAAV;AAAiBP,IAAAA,eAAe,EAAE;AAAlC;AAAA,CA3BE,mCA4BvBV,OAAO,CAACM,cAAD,CA5BgB,EA4BG;AAAA,SAAME,YAAN;AAAA,CA5BH,oBA8B1BA,YA9B0B,CAA5B","sourcesContent":["import pick from 'lodash/pick';\nimport { handleActions } from 'redux-actions';\nimport { getType } from 'typesafe-actions';\nimport {\n  loadSettingsSuccess,\n  changeSettingsCurrency,\n  updateExchangeRateSuccess,\n  toggleSectionCollapse,\n  completeSetup\n} from '../actions/settings';\nimport { signOutSuccess } from 'features/user/state/ui/SignOut.action';\nimport Currency from '../entities/Currency';\n\nconst initialState = {\n  isLoaded: false,\n  isSetupComplete: false,\n  currency: { base: Currency.defaultBase, secondary: [] },\n  exchangeRate: { [Currency.defaultBase]: 1.0 },\n  collapsedSections: []\n};\n\nexport default handleActions(\n  {\n    [loadSettingsSuccess]: (state, { payload }) => ({\n      ...state,\n      isLoaded: true,\n      ...pick(payload, Object.keys(state))\n    }),\n    [changeSettingsCurrency]: (state, { payload }) => {\n      let { base, secondary } = payload;\n      if (secondary.includes(base)) {\n        secondary = secondary\n          .concat(state.currency.base)\n          .filter(code => code !== base);\n      }\n\n      return { ...state, currency: { base, secondary } };\n    },\n    [updateExchangeRateSuccess]: (state, { payload }) => ({\n      ...state,\n      exchangeRate: payload\n    }),\n    [toggleSectionCollapse]: (state, { payload }) => ({\n      ...state,\n      collapsedSections: state.collapsedSections.includes(payload)\n        ? state.collapsedSections.filter(section => section !== payload)\n        : state.collapsedSections.concat(payload)\n    }),\n    [completeSetup]: state => ({ ...state, isSetupComplete: true }),\n    [getType(signOutSuccess)]: () => initialState\n  },\n  initialState\n);\n"]},"metadata":{},"sourceType":"module"}