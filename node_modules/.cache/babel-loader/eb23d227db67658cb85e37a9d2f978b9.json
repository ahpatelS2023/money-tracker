{"ast":null,"code":"import _classCallCheck from \"/Users/amipatel/Desktop/money-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/amipatel/Desktop/money-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/amipatel/Desktop/money-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/amipatel/Desktop/money-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/amipatel/Desktop/money-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/amipatel/Desktop/money-tracker/src/features/user/components/SignIn/SignIn.tsx\";\nimport React from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport { Header, Divider, Form, Button, Input, Message, Loader } from 'semantic-ui-react';\nimport { changeEmail, changeCode, sendCode, verifyCode, finishAuth } from 'features/user/state/ui/SignIn.action';\nimport './index.css';\n\nvar Auth =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Auth, _React$Component);\n\n  function Auth() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Auth);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Auth)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.renderSendCodeForm = function () {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Please provide your email address and we will send you a verification code for sign in.\"), React.createElement(Form, {\n        onSubmit: _this.props.sendCode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"auth--input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Input, {\n        fluid: true,\n        required: true,\n        placeholder: \"Email Address\",\n        name: \"email\",\n        type: \"email\",\n        icon: \"mail\",\n        iconPosition: \"left\",\n        value: _this.props.email,\n        onChange: function onChange(_, _ref) {\n          var value = _ref.value;\n          return _this.props.changeEmail(value);\n        },\n        disabled: _this.props.sendCodeStatus === 'REQUEST',\n        action: {\n          primary: true,\n          content: 'Send Code',\n          loading: _this.props.sendCodeStatus === 'REQUEST'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }))), React.createElement(Header, {\n        as: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Why do I need to sign in?\"), React.createElement(\"p\", {\n        style: {\n          marginTop: '1em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"After you sign in for the first time we will create a new database for you hosted in the cloud. This database will be used to synchronize your data among different devices as well as for back up.\"));\n    };\n\n    _this.renderVerifyCodeForm = function () {\n      return React.createElement(Form, {\n        onSubmit: _this.props.verifyCode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"An email with the code has been sent to \", _this.props.email), React.createElement(\"div\", {\n        className: \"auth--input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Input, {\n        fluid: true,\n        required: true,\n        placeholder: \"Your Code\",\n        type: \"number\",\n        icon: \"lock\",\n        iconPosition: \"left\",\n        value: _this.props.code,\n        onChange: function onChange(_, _ref2) {\n          var value = _ref2.value;\n          return _this.props.changeCode(value);\n        },\n        disabled: _this.props.verifyCodeStatus === 'REQUEST',\n        action: React.createElement(Button, {\n          primary: true,\n          content: \"Sign In\",\n          loading: _this.props.verifyCodeStatus === 'REQUEST',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(Button, {\n        basic: true,\n        as: \"a\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Didn't get the code?\")));\n    };\n\n    return _this;\n  }\n\n  _createClass(Auth, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.location && this.props.location.hash) {\n        this.props.finishAuth();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.isSignedIn) return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      });\n\n      if (this.props.location && this.props.location.hash) {\n        return React.createElement(Loader, {\n          active: true,\n          content: \"Synchronizing data, this might take a moment...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"container-raised-desktop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h2\",\n        icon: \"id card outline\",\n        content: \"Sign In\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), this.props.error && React.createElement(Message, {\n        error: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(Message.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Error\"), React.createElement(Message.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, this.props.error)), this.props.sendCodeStatus !== 'SUCCESS' ? this.renderSendCodeForm() : this.renderVerifyCodeForm(), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Back\")));\n    }\n  }]);\n\n  return Auth;\n}(React.Component);\n\nexport default Auth;","map":{"version":3,"sources":["/Users/amipatel/Desktop/money-tracker/src/features/user/components/SignIn/SignIn.tsx"],"names":["React","Redirect","Link","Header","Divider","Form","Button","Input","Message","Loader","changeEmail","changeCode","sendCode","verifyCode","finishAuth","Auth","renderSendCodeForm","props","email","_","value","sendCodeStatus","primary","content","loading","marginTop","renderVerifyCodeForm","code","verifyCodeStatus","location","hash","isSignedIn","error","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,IAAnB,QAA2C,kBAA3C;AACA,SACEC,MADF,EAEEC,OAFF,EAGEC,IAHF,EAIEC,MAJF,EAKEC,KALF,EAMEC,OANF,EAOEC,MAPF,QAQO,mBARP;AAUA,SACEC,WADF,EAEEC,UAFF,EAGEC,QAHF,EAIEC,UAJF,EAKEC,UALF,QAMO,sCANP;AAOA,OAAO,aAAP;;IAgBMC,I;;;;;;;;;;;;;;;;;;UAuCJC,kB,GAAqB;AAAA,aACnB,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mGADF,EAKE,oBAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,MAAKC,KAAL,CAAWL,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AACE,QAAA,KAAK,MADP;AAEE,QAAA,QAAQ,MAFV;AAGE,QAAA,WAAW,EAAC,eAHd;AAIE,QAAA,IAAI,EAAC,OAJP;AAKE,QAAA,IAAI,EAAC,OALP;AAME,QAAA,IAAI,EAAC,MANP;AAOE,QAAA,YAAY,EAAC,MAPf;AAQE,QAAA,KAAK,EAAE,MAAKK,KAAL,CAAWC,KARpB;AASE,QAAA,QAAQ,EAAE,kBAACC,CAAD;AAAA,cAAMC,KAAN,QAAMA,KAAN;AAAA,iBAAkB,MAAKH,KAAL,CAAWP,WAAX,CAAuBU,KAAvB,CAAlB;AAAA,SATZ;AAUE,QAAA,QAAQ,EAAE,MAAKH,KAAL,CAAWI,cAAX,KAA8B,SAV1C;AAWE,QAAA,MAAM,EAAE;AACNC,UAAAA,OAAO,EAAE,IADH;AAENC,UAAAA,OAAO,EAAE,WAFH;AAGNC,UAAAA,OAAO,EAAE,MAAKP,KAAL,CAAWI,cAAX,KAA8B;AAHjC,SAXV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CALF,EA0BE,oBAAC,MAAD;AAAQ,QAAA,EAAE,EAAC,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCA1BF,EA2BE;AAAG,QAAA,KAAK,EAAE;AAAEI,UAAAA,SAAS,EAAE;AAAb,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+MA3BF,CADmB;AAAA,K;;UAoCrBC,oB,GAAuB;AAAA,aACrB,oBAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,MAAKT,KAAL,CAAWJ,UAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAA4C,MAAKI,KAAL,CAAWC,KAAvD,CADF,EAEE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AACE,QAAA,KAAK,MADP;AAEE,QAAA,QAAQ,MAFV;AAGE,QAAA,WAAW,EAAC,WAHd;AAIE,QAAA,IAAI,EAAC,QAJP;AAKE,QAAA,IAAI,EAAC,MALP;AAME,QAAA,YAAY,EAAC,MANf;AAOE,QAAA,KAAK,EAAE,MAAKD,KAAL,CAAWU,IAPpB;AAQE,QAAA,QAAQ,EAAE,kBAACR,CAAD;AAAA,cAAMC,KAAN,SAAMA,KAAN;AAAA,iBAAkB,MAAKH,KAAL,CAAWN,UAAX,CAAsBS,KAAtB,CAAlB;AAAA,SARZ;AASE,QAAA,QAAQ,EAAE,MAAKH,KAAL,CAAWW,gBAAX,KAAgC,SAT5C;AAUE,QAAA,MAAM,EACJ,oBAAC,MAAD;AACE,UAAA,OAAO,MADT;AAEE,UAAA,OAAO,EAAC,SAFV;AAGE,UAAA,OAAO,EAAE,MAAKX,KAAL,CAAWW,gBAAX,KAAgC,SAH3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAmBE,oBAAC,MAAD;AAAQ,QAAA,KAAK,MAAb;AAAc,QAAA,EAAE,EAAC,GAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAnBF,CAFF,CADqB;AAAA,K;;;;;;;wCA1EH;AAClB,UAAI,KAAKX,KAAL,CAAWY,QAAX,IAAuB,KAAKZ,KAAL,CAAWY,QAAX,CAAoBC,IAA/C,EAAqD;AACnD,aAAKb,KAAL,CAAWH,UAAX;AACD;AACF;;;6BAEQ;AACP,UAAI,KAAKG,KAAL,CAAWc,UAAf,EAA2B,OAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;;AAC3B,UAAI,KAAKd,KAAL,CAAWY,QAAX,IAAuB,KAAKZ,KAAL,CAAWY,QAAX,CAAoBC,IAA/C,EAAqD;AACnD,eACE,oBAAC,MAAD;AACE,UAAA,MAAM,MADR;AAEE,UAAA,OAAO,EAAC,iDAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD;;AAED,aACE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,EAAE,EAAC,IAAX;AAAgB,QAAA,IAAI,EAAC,iBAArB;AAAuC,QAAA,OAAO,EAAC,SAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGG,KAAKb,KAAL,CAAWe,KAAX,IACC,oBAAC,OAAD;AAAS,QAAA,KAAK,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,OAAD,CAAS,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE,oBAAC,OAAD,CAAS,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAkB,KAAKf,KAAL,CAAWe,KAA7B,CAFF,CAJJ,EASG,KAAKf,KAAL,CAAWI,cAAX,KAA8B,SAA9B,GACG,KAAKL,kBAAL,EADH,GAEG,KAAKU,oBAAL,EAXN,EAYE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CAbF,CADF;AAmBD;;;;EArCgB1B,KAAK,CAACiC,S;;AAyGzB,eAAelB,IAAf","sourcesContent":["import React from 'react';\nimport { Redirect, Link, RouteProps } from 'react-router-dom';\nimport {\n  Header,\n  Divider,\n  Form,\n  Button,\n  Input,\n  Message,\n  Loader\n} from 'semantic-ui-react';\nimport { AsyncOperationStateT } from 'typings/async';\nimport {\n  changeEmail,\n  changeCode,\n  sendCode,\n  verifyCode,\n  finishAuth\n} from 'features/user/state/ui/SignIn.action';\nimport './index.css';\n\nexport interface SignInPropsT {\n  isSignedIn: boolean;\n  sendCodeStatus?: AsyncOperationStateT;\n  verifyCodeStatus?: AsyncOperationStateT;\n  email: string;\n  code: string;\n  error?: string;\n  changeEmail: typeof changeEmail;\n  changeCode: typeof changeCode;\n  sendCode: typeof sendCode;\n  verifyCode: typeof verifyCode;\n  finishAuth: typeof finishAuth;\n}\n\nclass Auth extends React.Component<SignInPropsT & RouteProps, {}> {\n  componentDidMount() {\n    if (this.props.location && this.props.location.hash) {\n      this.props.finishAuth();\n    }\n  }\n\n  render() {\n    if (this.props.isSignedIn) return <Redirect to=\"/\" />;\n    if (this.props.location && this.props.location.hash) {\n      return (\n        <Loader\n          active\n          content=\"Synchronizing data, this might take a moment...\"\n        />\n      );\n    }\n\n    return (\n      <div className=\"container-raised-desktop\">\n        <Header as=\"h2\" icon=\"id card outline\" content=\"Sign In\" />\n        <Divider />\n        {this.props.error && (\n          <Message error>\n            <Message.Header>Error</Message.Header>\n            <Message.Content>{this.props.error}</Message.Content>\n          </Message>\n        )}\n        {this.props.sendCodeStatus !== 'SUCCESS'\n          ? this.renderSendCodeForm()\n          : this.renderVerifyCodeForm()}\n        <Divider />\n        <p>\n          <Link to=\"/\">Back</Link>\n        </p>\n      </div>\n    );\n  }\n\n  renderSendCodeForm = () => (\n    <React.Fragment>\n      <p>\n        Please provide your email address and we will send you a verification\n        code for sign in.\n      </p>\n      <Form onSubmit={this.props.sendCode}>\n        <div className=\"auth--input-field\">\n          <Input\n            fluid\n            required\n            placeholder=\"Email Address\"\n            name=\"email\"\n            type=\"email\"\n            icon=\"mail\"\n            iconPosition=\"left\"\n            value={this.props.email}\n            onChange={(_, { value }) => this.props.changeEmail(value)}\n            disabled={this.props.sendCodeStatus === 'REQUEST'}\n            action={{\n              primary: true,\n              content: 'Send Code',\n              loading: this.props.sendCodeStatus === 'REQUEST'\n            }}\n          />\n        </div>\n      </Form>\n      <Header as=\"h3\">Why do I need to sign in?</Header>\n      <p style={{ marginTop: '1em' }}>\n        After you sign in for the first time we will create a new database for\n        you hosted in the cloud. This database will be used to synchronize your\n        data among different devices as well as for back up.\n      </p>\n    </React.Fragment>\n  );\n\n  renderVerifyCodeForm = () => (\n    <Form onSubmit={this.props.verifyCode}>\n      <p>An email with the code has been sent to {this.props.email}</p>\n      <div className=\"auth--input-field\">\n        <Input\n          fluid\n          required\n          placeholder=\"Your Code\"\n          type=\"number\"\n          icon=\"lock\"\n          iconPosition=\"left\"\n          value={this.props.code}\n          onChange={(_, { value }) => this.props.changeCode(value)}\n          disabled={this.props.verifyCodeStatus === 'REQUEST'}\n          action={\n            <Button\n              primary\n              content=\"Sign In\"\n              loading={this.props.verifyCodeStatus === 'REQUEST'}\n            />\n          }\n        />\n        <Button basic as=\"a\">\n          Didn't get the code?\n        </Button>\n      </div>\n    </Form>\n  );\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}